<!DOCTYPE html>
<html>
<head>
  <title>Myapp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
  
  <!-- BootstrapのCSSを読み込む -->
  <%= stylesheet_link_tag "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" %>
</head>

<body>
  <%= render 'shared/sidemenu' %>

  <div class="container mt-4">
    <% flash.each do |message_type, message| %>
      <div class="alert <%= message_type == 'success' ? 'alert-success' : 'alert-danger' %> alert-dismissible fade show" role="alert">
        <%= message %>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    <% end %>
  </div>

  <main class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <%= yield %>
  </main>

  <!-- BootstrapのJavaScriptを読み込む -->
  <%= javascript_include_tag "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" %>

  <!-- 自動でフラッシュメッセージを消すためのJavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(function() {
        var alerts = document.querySelectorAll('.alert');
        alerts.forEach(function(alert) {
          var alertInstance = new bootstrap.Alert(alert);
          alertInstance.close();
        });
      }, 5000); // 5秒後にメッセージを消す
    });
  </script>
</body>
</html>
